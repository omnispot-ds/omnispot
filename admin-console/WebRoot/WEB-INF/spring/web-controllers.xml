<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" "http://www.springframework.org/dtd/spring-beans-2.0.dtd">

<beans>

	<!-- Support for file upload -->
	<bean id="multipartResolver"
		class="org.springframework.web.multipart.commons.CommonsMultipartResolver">

		<property name="maxUploadSize" value="10000000" />
	</bean>

	<bean id="baseFormController" abstract="true">
		<property name="formView" value="" />
		<property name="successView" value="" />
		<property name="commandName" value="dataObject" />
		<property name="commandClass" value="" />
		<property name="propertyEditorRegistrar"
			ref="customEditorRegistrar" />
		<property name="bindOnNewForm" value="true"/>
		<property name="logicFactory" ref="logicFactory"/>		
		<property name="listGenerator" ref="optionListGenerator"/>
	</bean>

	<!-- URL-to-controller mappings -->
	<bean
		class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
		<property name="mappings">
			<value>
				/login.do*								= loginController
				/error.do*								= errorController
				/secure/user-home.do*					= homeController
				/secure/home.do*						= homeController
				/secure/group-home.do*					= homeController

				/secure/user/create.do*					= createUserController
				/secure/user/view.do*					= viewUserController
				/secure/user/delete.do*					= deleteUserController
				/secure/user/edit.do*					= editUserController
				
				/secure/customer/create.do*				= createCustomerController
				/secure/customer/view.do*				= viewCustomerController
				/secure/customer/delete.do*				= deleteCustomerController
				/secure/customer/edit.do*				= editCustomerController
				
				/secure/site/create.do*					= createSiteController
				/secure/site/view.do*					= viewSiteController
				/secure/site/delete.do*					= deleteSiteController
				/secure/site/edit.do*					= editSiteController
				
				/secure/installationGroup/create.do*	= createGroupController
				/secure/installationGroup/view.do*		= viewGroupController
				/secure/installationGroup/delete.do*	= deleteGroupController
				/secure/installationGroup/edit.do*		= editGroupController

				/secure/quickSearch.do*					= quickSearchController
				
				/secure/deploy/content.do*				= contentDeploymentController
			</value>
		</property>
	</bean>

	<!-- Controller for the login action -->
	<bean id="loginController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.login.LoginController">
		<property name="formView" value="/login.tiles" />
		<property name="successView" value="/secure/user-home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.User" />
	</bean>

	<!-- Home page controlle -->
	<bean id="homeController"
		class="com.kesdip.admin.web.controller.home.HomeController">
		<property name="logicFactory" ref="logicFactory"/>
		<property name="viewName" value="/secure/home.tiles"/>
		<property name="views">
			<value>
				/secure/home.do							= /secure/home.tiles
				/secure/user-home.do					= /secure/user-home.tiles
				/secure/group-home.do					= /secure/group-home.tiles
			</value>
		</property> 
	</bean>

	<!-- Error page controlle -->
	<bean id="errorController"
		class="org.springframework.web.servlet.mvc.ParameterizableViewController">
		<property name="viewName" value="/error.tiles" />
	</bean>

	<!-- =================== USER CONTROLLERS ==================== -->
	<!-- Controller for User creation -->
	<bean id="createUserController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.user.CreateController">
		<property name="formView" value="/secure/user/create.tiles" />
		<property name="successView" value="/secure/user-home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.User" />
	</bean>

	<!-- Controller for User viewing -->
	<bean id="viewUserController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.user.ViewController">
		<property name="formView" value="/secure/user/view.tiles" />
		<property name="successView" value="/secure/user-home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.User" />
	</bean>

	<!-- Controller for User deletion -->
	<bean id="deleteUserController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.user.DeleteController">
		<property name="formView" value="/secure/user/view.tiles" />
		<property name="successView" value="/secure/user-home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.User" />
	</bean>

	<!-- Controller for User edition -->
	<bean id="editUserController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.user.EditController">
		<property name="formView" value="/secure/user/edit.tiles" />
		<property name="successView" value="/secure/user-home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.User" />
	</bean>

	<!-- =================== QUICK SEARCH ==================== -->
	<!-- Controller for Quick Search -->
	<bean id="quickSearchController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.search.QuickSearchController">
		<property name="formView" value="/secure/home.do" />
		<property name="commandName" value="searchDataObject" />
		<property name="commandClass"
			value="com.kesdip.business.beans.QuickSearchBean" />
		<property name="views">
			<value>
				User				= /secure/user/view.do
				Customer			= /secure/customer/view.do
				null				= /secure/home.do
			</value>
		</property> 
	</bean>

	<!-- =================== CUSTOMER CONTROLLERS ==================== -->
	<!-- Controller for Customer creation -->
	<bean id="createCustomerController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.customer.CreateController">
		<property name="formView" value="/secure/customer/create.tiles" />
		<property name="successView" value="/secure/user-home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.Customer" />
	</bean>

	<!-- Controller for Customer viewing -->
	<bean id="viewCustomerController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.customer.ViewController">
		<property name="formView" value="/secure/customer/view.tiles" />
		<property name="successView" value="/secure/user-home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.Customer" />
	</bean>

	<!-- Controller for Customer deletion -->
	<bean id="deleteCustomerController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.customer.DeleteController">
		<property name="formView" value="/secure/customer/view.tiles" />
		<property name="successView" value="/secure/user-home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.Customer" />
	</bean>

	<!-- Controller for Customer edition -->
	<bean id="editCustomerController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.customer.EditController">
		<property name="formView" value="/secure/customer/edit.tiles" />
		<property name="successView" value="/secure/user-home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.Customer" />
	</bean>
	
	<!-- =================== SITE CONTROLLERS ==================== -->
	<!-- Controller for Site creation -->
	<bean id="createSiteController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.site.CreateController">
		<property name="formView" value="/secure/site/create.tiles" />
		<property name="successView" value="/secure/home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.Site" />
	</bean>
	
	<!-- Controller for Site viewing -->
	<bean id="viewSiteController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.site.ViewController">
		<property name="formView" value="/secure/site/view.tiles" />
		<property name="successView" value="/secure/home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.Site" />
	</bean>
	
	<!-- Controller for Site deletion -->
	<bean id="deleteSiteController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.site.DeleteController">
		<property name="formView" value="/secure/site/view.tiles" />
		<property name="successView" value="/secure/home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.Site" />
	</bean>

	<!-- Controller for Site edition -->
	<bean id="editSiteController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.site.EditController">
		<property name="formView" value="/secure/site/edit.tiles" />
		<property name="successView" value="/secure/home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.Site" />
	</bean>
	
	<!-- =================== GROUP CONTROLLERS ==================== -->
	<!-- Controller for Group creation -->
	<bean id="createGroupController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.group.CreateController">
		<property name="formView" value="/secure/installationGroup/create.tiles" />
		<property name="successView" value="/secure/group-home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.InstallationGroup" />
	</bean>
	<!-- Controller for Group viewing -->
	<bean id="viewGroupController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.group.ViewController">
		<property name="formView" value="/secure/installationGroup/view.tiles" />
		<property name="successView" value="/secure/group-home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.InstallationGroup" />
	</bean>
	<!-- Controller for Group deletion -->
	<bean id="deleteGroupController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.group.DeleteController">
		<property name="formView" value="/secure/installationGroup/view.tiles" />
		<property name="successView" value="/secure/group-home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.InstallationGroup" />
	</bean>
	<!-- Controller for Group edition -->
	<bean id="editGroupController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.group.EditController">
		<property name="formView" value="/secure/installationGroup/edit.tiles" />
		<property name="successView" value="/secure/group-home.do" />
		<property name="commandClass"
			value="com.kesdip.business.domain.generated.InstallationGroup" />
	</bean>
	
	<!-- =================== DEPLOYMENT CONTROLLERS ==================== -->
	<!-- Controller for Content deployment -->
	<bean id="contentDeploymentController" parent="baseFormController"
		class="com.kesdip.admin.web.controller.deploy.DeployContentController">
		<property name="groupFormView" value="/secure/deploy/contentGroup.tiles" />
		<property name="siteFormView" value="/secure/deploy/contentSite.tiles" />
		<property name="groupSuccessView" value="/secure/group-home.do" />
		<property name="siteSuccessView" value="/secure/home.do" />
		<property name="commandClass"
			value="com.kesdip.business.beans.ContentDeploymentBean" />
	</bean>
	
</beans>
